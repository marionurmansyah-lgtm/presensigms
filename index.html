<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Presensi GMS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; width: 100%; font-family: 'Inter', sans-serif; background: #f3f4f6; }
    body { display: flex; flex-direction: column; align-items: center; padding: 15px; gap: 12px; }
    .container { max-width: 480px; width: 100%; background: white; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; }
    .header-title { text-align: center; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 20px; border-radius: 16px; width: 100%; max-width: 480px; color: white; }
    .btn { width: 100%; padding: 12px; border-radius: 10px; font-weight: 600; transition: 0.3s; }
    .btn-primary { background: #1e3c72; color: white; }
    .btn-admin { background: #8b5cf6; color: white; } /* Ungu untuk Admin */
    .input-field { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; }
    .hidden { display: none; }
    .tab-btn { flex: 1; padding: 10px; font-size: 12px; font-weight: 600; text-align: center; border-bottom: 2px solid transparent; }
    .tab-btn.active { border-bottom: 2px solid #1e3c72; color: #1e3c72; }
    .marquee { background: #ff6b35; color: white; padding: 5px; font-size: 11px; white-space: nowrap; overflow: hidden; }
    .marquee span { display: inline-block; animation: scroll 15s linear infinite; }
    @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
  </style>
 </head>
 <body>

  <div class="header-title">
   <h1 class="text-xl font-bold">PRESENSI ONLINE GMS</h1>
   <p class="text-xs opacity-80">Sistem Absensi Digital</p>
  </div>

  <div class="container">
    <div id="loginPage" class="p-6">
      <h2 class="text-2xl font-bold text-center mb-6">Login</h2>
      <input type="text" id="loginNama" class="input-field" placeholder="Nama Lengkap">
      <input type="password" id="loginPassword" class="input-field" placeholder="ID Karyawan">
      <button onclick="login()" class="btn btn-primary mt-4">LOGIN</button>
    </div>

    <div id="mainDashboard" class="hidden">
      <div id="welcomeCard" class="p-5 text-white bg-gradient-to-r from-pink-500 to-red-500">
        <p class="text-sm">Selamat Datang!</p>
        <h2 id="userName" class="text-xl font-bold">-</h2>
        <p id="userId" class="text-xs opacity-80">-</p>
      </div>

      <div class="flex border-b">
        <div id="tab-absensi" class="tab-btn active" onclick="switchTab('absensi')">Absensi</div>
        <div id="tab-izin" class="tab-btn" onclick="switchTab('izin')">Izin</div>
        <div id="tab-riwayat" class="tab-btn" onclick="switchTab('riwayat')">Riwayat</div>
        <div id="tab-admin" class="tab-btn hidden" onclick="switchTab('admin')">‚≠ê Admin</div>
      </div>

      <div class="p-4">
        <div id="content-absensi">
          <div class="marquee mb-4"><span>üîî Jangan lupa absen hari ini! ‚Ä¢ üìç Periksa lokasi GPS Anda ‚Ä¢ ‚úÖ Kedisiplinan adalah kunci sukses</span></div>
          <div class="bg-blue-500 text-white p-6 rounded-xl text-center mb-4">
            <p id="currentDate" class="text-sm">Senin, 19 Januari 2026</p>
            <p id="currentTime" class="text-3xl font-bold">00:00:00</p>
            <p id="currentLoc" class="text-xs mt-2 opacity-80">Mendeteksi Lokasi...</p>
          </div>
          <button class="btn bg-emerald-500 text-white mb-2">üì∏ CLOCK IN</button>
        </div>

        <div id="content-admin" class="hidden">
          <h3 class="font-bold mb-3">Panel Kontrol Admin</h3>
          <div class="grid grid-cols-2 gap-3">
            <button class="p-4 bg-gray-100 rounded-lg text-center text-sm">Lihat Semua Absen</button>
            <button class="p-4 bg-gray-100 rounded-lg text-center text-sm">Rekap Laporan</button>
            <button class="p-4 bg-gray-100 rounded-lg text-center text-sm">Kelola User</button>
            <button class="p-4 bg-gray-100 rounded-lg text-center text-sm">Cetak Excel</button>
          </div>
        </div>

        <div id="content-izin" class="hidden text-center p-10 text-gray-400">Fitur Izin/Sakit</div>
        <div id="content-riwayat" class="hidden text-center p-10 text-gray-400">Riwayat Presensi Anda</div>

        <button onclick="logout()" class="mt-8 text-red-500 text-sm font-bold w-full">LOGOUT</button>
      </div>
    </div>
  </div>

  <div class="text-center mt-4 text-xs text-gray-400">
    <p>Supported by: Klase Auto Graha</p>
    <p>rionurmansyah</p>
  </div>

  <script>
    const API_URL = 'URL_WEB_APP_GOOGLE_SCRIPT_ANDA';

    function updateTime() {
      const now = new Date();
      document.getElementById('currentTime').innerText = now.toLocaleTimeString('id-ID');
    }
    setInterval(updateTime, 1000);

    function login() {
      const nama = document.getElementById('loginNama').value;
      const pass = document.getElementById('loginPassword').value;

      // Logika Pengecekan Admin
      // Jika ID mengandung kata 'Admin' atau sesuai database Anda
      let role = "user";
      if (pass.toLowerCase().includes("admin") || nama.toLowerCase().includes("lulu")) {
        role = "admin";
      }

      const userData = { nama: nama, id: pass, role: role };
      localStorage.setItem('userGMS', JSON.stringify(userData));
      renderDashboard(userData);
    }

    function renderDashboard(user) {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('mainDashboard').classList.remove('hidden');
      document.getElementById('userName').innerText = user.nama;
      document.getElementById('userId').innerText = "ID: " + user.id;

      // Jika role adalah admin, tampilkan tab admin
      if (user.role === "admin") {
        document.getElementById('tab-admin').classList.remove('hidden');
        document.getElementById('welcomeCard').classList.replace('from-pink-500', 'from-indigo-600');
        document.getElementById('welcomeCard').classList.replace('to-red-500', 'to-purple-700');
      }
    }

    function switchTab(tab) {
      // Sembunyikan semua content
      ['absensi', 'izin', 'riwayat', 'admin'].forEach(t => {
        document.getElementById('content-' + t).classList.add('hidden');
        document.getElementById('tab-' + t).classList.remove('active');
      });
      // Tampilkan yang dipilih
      document.getElementById('content-' + tab).classList.remove('hidden');
      document.getElementById('tab-' + tab).classList.add('active');
    }

    function logout() {
      localStorage.removeItem('userGMS');
      location.reload();
    }

    window.onload = () => {
      const saved = localStorage.getItem('userGMS');
      if (saved) renderDashboard(JSON.parse(saved));
    };
  </script>
 </body>
</html>
